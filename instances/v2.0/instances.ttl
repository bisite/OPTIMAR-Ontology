@prefix optimar: <https://w3id.org/optimar#> .
@prefix sosa: <https://www.w3.org/ns/sosa/> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix qudt: <http://qudt.org/schema/qudt/> .
@prefix unit: <http://qudt.org/vocab/unit/> .
@prefix prov: <http://www.w3.org/ns/prov#> .

##########################################################
# Platform and Location
##########################################################

optimar:NorthSeaLocation a optimar:Location ;
    rdfs:label "Mar del Norte"@es ;
    rdfs:label "North Sea"@en .

optimar:OptimarPlatform01 a optimar:FloatingPlatform ;
    rdfs:label "Plataforma Flotante OPTiMAR 01"@es ;
    rdfs:label "OPTiMAR Floating Platform 01"@en ;
    optimar:locatedIn optimar:NorthSeaLocation .
    # Nota: La relación estructural se define a través de la torre que se apoya en la subestructura

##########################################################
# Structural Components (Floating & Mooring)
##########################################################

optimar:FloatingSubstructure01 a optimar:FloatingSubstructure ;
    rdfs:label "Subestructura flotante 01"@es ;
    optimar:material "Acero Naval"@es ;
    optimar:supports optimar:Tower01 .

optimar:MooringSystem01 a optimar:MooringSystem ;
    rdfs:label "Sistema de amarre 01"@es ;
    optimar:connectedTo optimar:FloatingSubstructure01 .

##########################################################
# Turbine and its components
##########################################################

optimar:Turbine01 a optimar:Turbine ;
    rdfs:label "Turbina Eólica 01"@es ;
    optimar:operationalStatus "Operativa"@es ;
    
    # Propiedades QUDT (QuantityValue)
    optimar:hasCapacity [ 
        a qudt:QuantityValue ; 
        qudt:numericValue "15"^^xsd:decimal ; 
        qudt:unit unit:MegaW 
    ] ;
    
    # Relación con sus componentes principales
    optimar:hasTurbineComponent optimar:Tower01, optimar:Nacelle01, optimar:Hub01, optimar:Blade01, optimar:Blade02, optimar:Blade03 .

optimar:Tower01 a optimar:Tower ;
    rdfs:label "Torre T1"@es ;
    optimar:height [ 
        a qudt:QuantityValue ; 
        qudt:numericValue "120"^^xsd:decimal ; 
        qudt:unit unit:M 
    ] ;
    optimar:isSupportedBy optimar:FloatingSubstructure01 ;
    optimar:supports optimar:Nacelle01 .

optimar:Nacelle01 a optimar:Nacelle ;
    rdfs:label "Nacelle T1"@es ;
    optimar:houses optimar:Generator01 ;
    optimar:isSupportedBy optimar:Tower01 .

optimar:Generator01 a optimar:Generator ;
    rdfs:label "Generador T1"@es ;
    optimar:mass [ 
        a qudt:QuantityValue ; 
        qudt:numericValue "35000"^^xsd:decimal ; 
        qudt:unit unit:KiloGM 
    ] ;
    optimar:isHousedIn optimar:Nacelle01 .

optimar:Hub01 a optimar:Hub ;
    rdfs:label "Hub T1"@es ;
    optimar:connectedTo optimar:Nacelle01 ;
    optimar:transmitsMovementTo optimar:Generator01 .

optimar:Blade01 a optimar:Blade ;
    rdfs:label "Pala 01"@es ;
    optimar:externalShape "Aerodinámica"@es ;
    optimar:length [ 
        a qudt:QuantityValue ; 
        qudt:numericValue "90"^^xsd:decimal ; 
        qudt:unit unit:M 
    ] ;
    optimar:material "Fibra de Carbono"@es ;
    optimar:connectedTo optimar:Hub01 .

optimar:PitchSystem01 a optimar:PitchSystem ;
    rdfs:label "Sistema de Pitch Pala 01"@es ;
    optimar:connectedTo optimar:Blade01 .

##########################################################
# Sensors
##########################################################

optimar:Anemometer01 a optimar:Anemometer ;
    rdfs:label "Anemómetro Principal"@es ;
    optimar:measuresWind optimar:CurrentWindCondition ;
    optimar:isMonitoredBy optimar:Operator01 .

optimar:CorrosionCam01 a optimar:CorrosionCamera ;
    rdfs:label "Cámara de corrosión - Pala 01"@es ;
    sosa:observes optimar:Blade01 ; # Propiedad heredada de SOSA
    optimar:detectsCorrosion optimar:BladeCorrosionFailure .

optimar:VibrationSensor01 a optimar:DynamicMonitor ;
    rdfs:label "Sensor de vibración de Torre"@es ;
    optimar:measuresVibration optimar:TowerVibrationData01 .

##########################################################
# Actors and Roles
##########################################################

optimar:Operator01 a optimar:MaintenanceOperator ;
    rdfs:label "Juan Pérez"@es ;
    optimar:hasRole optimar:TechnicalRole ;
    optimar:monitors optimar:Anemometer01 ;
    optimar:performsTask optimar:RoutineInspection01 .

optimar:Analyst01 a optimar:DataAnalyst ;
    rdfs:label "Ana García"@es ;
    optimar:hasRole optimar:AnalyticalRole ;
    optimar:analyzes optimar:CorrosionEvent01 .

optimar:CloudAdmin01 a optimar:CloudAdministrator ;
    rdfs:label "Admin Cloud"@es ;
    optimar:manages optimar:OptimarPlatform01 .

##########################################################
# Tasks and Maintenance
##########################################################

optimar:RoutineInspection01 a optimar:MonitoringTask ;
    rdfs:label "Inspección Rutinaria de Sensores"@es ;
    optimar:performedBy optimar:Operator01 .

optimar:BladeRepair01 a optimar:Maintenance ;
    rdfs:label "Reparación de superficie de Pala 01"@es ;
    optimar:performedBy optimar:Operator01 ;
    optimar:requiresMaintenance optimar:Blade01 .

##########################################################
# Failures and Events
##########################################################

# 1. El concepto abstracto del fallo (La causa)
optimar:BladeCorrosionFailure a optimar:Corrosion ;
    rdfs:label "Corrosión por salinidad"@es ;
    optimar:affects optimar:Blade01 ;
    optimar:hasFailureCause optimar:CurrentWindCondition . # Asumiendo que el viento/ambiente salino es la causa

# 2. El evento específico de detección (El suceso en el tiempo)
optimar:CorrosionEvent01 a optimar:CorrosionEvent ;
    rdfs:label "Evento de detección de corrosión #234"@es ;
    optimar:causedBy optimar:BladeCorrosionFailure ;
    optimar:detectedBy optimar:CorrosionCam01 ;
    optimar:relatedToComponent optimar:Blade01 ;
    optimar:corrosionLevel "0.45"^^xsd:decimal ;
    prov:generated optimar:CorrosionImage01 .

##########################################################
# Data and Measurements
##########################################################

# Imagen generada por el evento
optimar:CorrosionImage01 a optimar:Image ;
    rdfs:label "Imagen térmica de corrosión"@es ;
    optimar:imageURL "http://storage.optimar.w3id.org/img/corr_01.jpg"^^xsd:string .

# Datos de vibración (Instancia de VibrationData)
optimar:TowerVibrationData01 a optimar:VibrationData ;
    rdfs:label "Lectura de vibración Torre T1"@es ;
    optimar:value "0.05"^^xsd:decimal ;
    optimar:unit "mm/s" ;
    optimar:dateTime "2025-10-06T10:30:00"^^xsd:dateTime .

# Observación SOSA (Vinculando sensor y dato)
optimar:Observation01 a optimar:Observation ;
    rdfs:label "Observación de Vibración 10:30"@es ;
    optimar:madeBySensor optimar:VibrationSensor01 ;
    sosa:hasResult optimar:TowerVibrationData01 .

##########################################################
# Environmental Conditions
##########################################################

optimar:CurrentWindCondition a optimar:EnvironmentalCondition ;
    rdfs:label "Condiciones actuales Viento"@es ;
    optimar:windSpeed [ 
        a qudt:QuantityValue ; 
        qudt:numericValue "12.5"^^xsd:decimal ; 
        qudt:unit unit:M-PER-SEC 
    ] ;
    optimar:windDirection [ 
        a qudt:QuantityValue ; 
        qudt:numericValue "280"^^xsd:decimal ; 
        qudt:unit unit:DEG 
    ] .